JWT = JSON Web Token

example - eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.
          eyJpZCI6IjY1ZmFiYyIsImlhdCI6MTcwMDAwMDAwMCwiZXhwIjoxNzAwODY0MDAwfQ.
          XYZ123

JWT has 3 parts:
Header â€“ algorithm info
Payload â€“ user data (VERY IMPORTANT)
Signature â€“ security

Payload example -:
{
  id: "userIdFromMongoDB",
  iat: 1700000000,
  exp: 1700864000
}


step 1 -:

jwt.sign(
    { id: user._id },       // ðŸ‘ˆ PAYLOAD
    process.env.JWT_SECRET,
    { expiresIn: '1d' }
)
Whatever we put inside jwt.sign() payload
is what you get back when you verify the token.


step 2 -:

const decoded = jwt.verify(token, process.env.JWT_SECRET)

This does two things:
âœ… Checks if token is valid
âœ… Decodes the payload inside the token - returns decodes payload

If the token was created like this:
jwt.sign({ id: "696464a8a4a8668f1223fb7c" }, "secret")

Then decoded becomes:
{
  id: "696464a8a4a8668f1223fb7c",
  iat: 1700000000,
  exp: 1700086400
}

So now:
decoded.id === user._id


How frontend (or Postman) uses token
In headers:
Authorization: Bearer <token>
eg - Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...


// verify token - jwt.verify() checks - token is real, not tampered, not expired
        const decoded = jwt.verify(token, process.env.JWT_SECRET)

        // attach user info to request 
        req.user = { id: decoded.id } // request object contains headers, body, params, query
        /* 
        now request becomes -:
        req = {
           headers: {...},
           body: {...},
           user: {
               id: "65fabcd123"
            }
        }
        */

        // allow request to continue
        next()